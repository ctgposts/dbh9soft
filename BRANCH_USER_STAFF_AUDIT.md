# Branch, User ржУ Staff Management - рж╕ржорзНржкрзВрж░рзНржг ржЕржбрж┐ржЯ ржУ рж╕рзБржкрж╛рж░рж┐рж╢

**Date:** February 5, 2026  
**Status:** ржмрж┐рж╕рзНрждрзГржд ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж╕ржорзНржкржирзНржи

---

## ЁЯУЛ рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

рждрж┐ржиржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржоржЗ ржЖржЫрзЗ ржХрж┐ржирзНрждрзБ **ржкрж░рж╕рзНржкрж░ рж╕ржВржпрзБржХрзНрждрж┐ ржжрзБрж░рзНржмрж▓ ржПржмржВ ржмрж┐ржнрзНрж░рж╛ржирзНрждрж┐ржХрж░**ред ржПржЧрзБрж▓рзЛ ржХрзЛржерж╛ржУ ржорж┐рж▓рзЗ ржЧрзЗржЫрзЗ, ржХрзЛржерж╛ржУ ржкрзГржержХ ржЖржЫрзЗред

---

## ЁЯФН ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

### 1. **BRANCH MANAGEMENT** тЬЕ рж╕ржорзНржкрзВрж░рзНржг

**ржЕржмрж╕рзНржерж╛ржи:**
- ржлрзНрж░ржирзНржЯржПржирзНржб: `src/components/BranchManagement.tsx`
- ржмрзНржпрж╛ржХржПржирзНржб: `convex/branches.ts`
- ржбрж╛ржЯрж╛ржмрзЗрж╕: `schema.ts` - `branches` ржЯрзЗржмрж┐рж▓

**ржХрж┐ ржХрж╛ржЬ ржХрж░рзЗ:**
- тЬЕ ржирждрзБржи рж╢рж╛ржЦрж╛ рждрзИрж░рж┐ ржХрж░рж╛
- тЬЕ рж╢рж╛ржЦрж╛ рж╕ржорзНржкрж╛ржжржирж╛
- тЬЕ рж╢рж╛ржЦрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛
- тЬЕ рж╢рж╛ржЦрж╛рж░ рждржерзНржп ржжрзЗржЦрж╛ (ржарж┐ржХрж╛ржирж╛, рж╢рж╣рж░, ржХрзЛржб)
- тЬЕ рж╢рж╛ржЦрж╛рж░ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржирж┐рж░рзНржзрж╛рж░ржг (ржХрж░рзНржоржЪрж╛рж░рзА ржерзЗржХрзЗ)
- тЬЕ рж╢рж╛ржЦрж╛рж░ ржкрж░рж┐рж╕ржВржЦрзНржпрж╛ржи (ржХрж░рзНржоржЪрж╛рж░рзА, ржкржгрзНржп, ржХржо рж╕рзНржЯржХ)

**рж╕ржорж╕рзНржпрж╛:**
```
тЭМ рж╢рж╛ржЦрж╛ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржЖржЧрзЗ ржХрж░рзНржоржЪрж╛рж░рзА ржерж╛ржХрждрзЗ рж╣ржпрж╝ (рж▓ржЬрж┐ржХрзНржпрж╛рж▓ рж╕ржорж╕рзНржпрж╛)
тЭМ ржорзНржпрж╛ржирзЗржЬрж╛рж░ рж╣рж┐рж╕рзЗржмрзЗ ржХрзЛржи ржХрж░рзНржоржЪрж╛рж░рзА ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░ржм?
тЭМ ржХрзЛржи рж╕рж┐рж╕рзНржЯрзЗржо ржирзЗржЗ ржпрзЗ ржПржХ рж╢рж╛ржЦрж╛рж░ ржХрж░рзНржоржЪрж╛рж░рзА ржЕржирзНржп рж╢рж╛ржЦрж╛ржпрж╝ ржпрзЗрждрзЗ ржкрж╛рж░ржмрзЗ
```

**ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░:**
```
branches {
  name: string,
  code: string,
  address: string,
  city: string,
  phone?: string,
  email?: string,
  managerId?: Id<"employees">,      тЖР ржХрж░рзНржоржЪрж╛рж░рзА ржерзЗржХрзЗ рж╕ржВржпрзБржХрзНржд
  managerName?: string,
  isActive: boolean,
  settings?: {...}
}
```

---

### 2. **EMPLOYEE MANAGEMENT** тЬЕ рж╕ржорзНржкрзВрж░рзНржг

**ржЕржмрж╕рзНржерж╛ржи:**
- ржлрзНрж░ржирзНржЯржПржирзНржб: `src/components/EmployeeManagement.tsx`
- ржмрзНржпрж╛ржХржПржирзНржб: `convex/employees.ts`
- ржбрж╛ржЯрж╛ржмрзЗрж╕: `schema.ts` - `employees` ржЯрзЗржмрж┐рж▓

**ржХрж┐ ржХрж╛ржЬ ржХрж░рзЗ:**
- тЬЕ ржирждрзБржи ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рж╛
- тЬЕ ржХрж░рзНржоржЪрж╛рж░рзА рж╕ржорзНржкрж╛ржжржирж╛
- тЬЕ ржХрж░рзНржоржЪрж╛рж░рзА ржорзБржЫрзЗ ржлрзЗрж▓рж╛
- тЬЕ рж╢рж╛ржЦрж╛ ржЕржирзБржпрж╛ржпрж╝рзА ржлрж┐рж▓рзНржЯрж╛рж░
- тЬЕ ржкржж ржЕржирзБржпрж╛ржпрж╝рзА ржлрж┐рж▓рзНржЯрж╛рж░
- тЬЕ ржмрзЗрждржи, ржХржорж┐рж╢ржи рж╕рзЗржЯ ржХрж░рж╛
- тЬЕ ржЕржирзБржорждрж┐ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛

**рж╕ржорж╕рзНржпрж╛:**
```
тЭМ Employee ржПржмржВ User ржжрзБржЯрж┐ ржЖрж▓рж╛ржжрж╛ рж╕рж┐рж╕рзНржЯрзЗржо!
тЭМ ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рж▓рзЗ User ржбрж╛ржЯрж╛ржмрзЗрж╕рзЗ ржпрж╛ржпрж╝ ржирж╛
тЭМ ржЕржирзБржорждрж┐ ржжрзБржЗ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржерж╛ржХрзЗ:
   - employees.ts ржП "permissions" array
   - userManagement.ts ржП role-based permissions
```

**ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░:**
```
employees {
  employeeId: string,
  name: string,
  email?: string,
  phone: string,
  position: string,              тЖР "Manager", "Cashier" etc
  branchId: Id<"branches">,      тЖР ржХрзЛржи рж╢рж╛ржЦрж╛ржпрж╝ ржХрж╛ржЬ ржХрж░рзЗ
  branchName: string,
  salary?: number,
  commissionRate?: number,
  permissions: string[],          тЖР ["pos", "inventory", "reports"]
  isActive: boolean,
  hireDate: number,
  address?: string,
  emergencyContact?: {...}
}
```

---

### 3. **USER MANAGEMENT** тЪая╕П рж╕ржорж╕рзНржпрж╛ржкрзВрж░рзНржг

**ржЕржмрж╕рзНржерж╛ржи:**
- ржлрзНрж░ржирзНржЯржПржирзНржб: `src/components/UserManagement.tsx`
- ржмрзНржпрж╛ржХржПржирзНржб: `convex/userManagement.ts`
- ржбрж╛ржЯрж╛ржмрзЗрж╕: `schema.ts` - `userManagement` ржЯрзЗржмрж┐рж▓

**ржХрж┐ ржХрж╛ржЬ ржХрж░рзЗ:**
- тЬЕ ржирждрзБржи ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рж╛
- тЬЕ ржнрзВржорж┐ржХрж╛ (Role) рждрзИрж░рж┐ ржХрж░рж╛
- тЬЕ ржЕржирзБржорждрж┐ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛
- тЬЕ рж╢рж╛ржЦрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛
- тЬЕ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржХрж╛рж░рзНржпржХрж▓рж╛ржк ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛

**рж╕ржорж╕рзНржпрж╛:**
```
тЭМ Employee ржПржмржВ User рж╕ржорзНржкрзВрж░рзНржг ржЖрж▓рж╛ржжрж╛!
   - ржПржХржЬржи ржХрж░рзНржоржЪрж╛рж░рзА ржЕржЯрзЛржорзНржпрж╛ржЯрж┐ржХрзНржпрж╛рж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж╣ржпрж╝ ржирж╛
   - ржжрзБржмрж╛рж░ ржбрж╛ржЯрж╛ ржПржирзНржЯрзНрж░рж┐ ржжрж░ржХрж╛рж░ ржкржбрж╝рзЗ

тЭМ Branch рж╕рж╣ User ржПржмржВ Employee ржжрзБржЯрзЛржЗ ржерж╛ржХрзЗ:
   employees.branchId ржУ userManagement.branchId

тЭМ Role-Based vs Permission-Based ржжрзБржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржо:
   - employees.permissions = ["pos", "inventory", "reports"]
   - userManagement рж░рзЗржХрж░рзНржбрзЗ roleId = "userRoles"
   
тЭМ ржХрзЗ ржХрзА ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржПржЯрж╛ рж╕рзНржкрж╖рзНржЯ ржиржпрж╝
```

**ржбрж╛ржЯрж╛ржмрзЗрж╕ рж╕рзНржЯрзНрж░рж╛ржХржЪрж╛рж░:**
```
userManagement {
  userId: string,                 тЖР "USER-001"
  firstName: string,
  lastName: string,
  fullName: string,
  email: string,
  phone?: string,
  password: string,               тЖР рж╣рзНржпрж╛рж╢ ржХрж░рж╛
  avatar?: string,
  roleId: Id<"userRoles">,        тЖР ржнрзВржорж┐ржХрж╛
  roleName: string,
  branchId?: Id<"branches">,      тЖР рж╢рж╛ржЦрж╛
  branchName?: string,
  department?: string,
  designation?: string,
  joinDate: number,
  lastLogin?: number,
  status: string,                 тЖР "active", "inactive" etc
  isSuperAdmin: boolean,
  isAdmin: boolean,
  canManageUsers: boolean,
  canManageRoles: boolean,
  canAccessReports: boolean,
  canAccessSettings: boolean,
  twoFactorEnabled: boolean,
  twoFactorSecret?: string,
  // ... ржЖрж░ржУ ржЕржирзЗржХ ржХрж┐ржЫрзБ
}

userRoles {
  roleName: string,               тЖР "Super Admin", "Manager" etc
  description: string,
  permissions: string[],          тЖР ["user_management", "inventory"]
  isActive: boolean,
  createdBy?: Id<"users">,
  createdByName: string,
  createdAt: number,
  updatedAt: number,
}
```

---

### 4. **STAFF MANAGEMENT** ЁЯЪл ржПржЦржирзЛ ржЖржзрзБржирж┐ржХ ржиржпрж╝

**ржЕржмрж╕рзНржерж╛ржи:**
- ржлрзНрж░ржирзНржЯржПржирзНржб: Settings.tsx ржП ржЫрзЛржЯ ржПржХржЯрж┐ ржмрж┐ржнрж╛ржЧ
- ржмрзНржпрж╛ржХржПржирзНржб: `convex/employees.ts` ржжрж┐ржпрж╝рзЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рж╛ рж╣ржпрж╝
- ржбрж╛ржЯрж╛ржмрзЗрж╕: `employees` ржЯрзЗржмрж┐рж▓

**ржмрзИрж╢рж┐рж╖рзНржЯрзНржп:**
- тЬЕ ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐/рж╕ржорзНржкрж╛ржжржи
- тЬЕ ржкржж ржирж┐рж░рзНржзрж╛рж░ржг
- тЬЕ ржЕржирзБржорждрж┐ рж╕рзЗржЯ ржХрж░рж╛
- тЭМ ржХрзЛржи ржЙржирзНржиржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп ржирзЗржЗ

**рж╕ржорж╕рзНржпрж╛:**
```
тЭМ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ рж╕рж┐рж╕рзНржЯрзЗржо (Employee = Staff)
тЭМ User Management ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржиржпрж╝
тЭМ ржХрзЛржи Performance Tracking ржирзЗржЗ
тЭМ ржХрзЛржи Dashboard ржирзЗржЗ
```

---

## ЁЯОп рж╕ржорж╕рзНржпрж╛рж░ ржорзВрж▓ ржХрж╛рж░ржг

### рж╕ржорж╕рзНржпрж╛ #1: **рждрж┐ржиржЯрж┐ ржЕржиржирзНржп ржЗржЙржЬрж╛рж░ рж╕рж┐рж╕рзНржЯрзЗржо**

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ        ржпрж╛ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржЖржЫрзЗ             тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ 1. employees ржЯрзЗржмрж┐рж▓                 тФВ
тФВ    тФФтФА рж╢рж╛ржЦрж╛-ржнрж┐рждрзНрждрж┐ржХ ржХрж░рзНржоржЪрж╛рж░рзА        тФВ
тФВ                                     тФВ
тФВ 2. userManagement ржЯрзЗржмрж┐рж▓             тФВ
тФВ    тФФтФА рж╕рж┐рж╕рзНржЯрзЗржо-ржмрзНржпрж╛ржкрзА ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА  тФВ
тФВ                                     тФВ
тФВ 3. Convex Auth (users)              тФВ
тФВ    тФФтФА ржкрзНрж░ржХрзГржд рж▓ржЧржЗржи рж╕рж┐рж╕рзНржЯрзЗржо         тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

ржлрж▓рж╛ржлрж▓: ржЭрж╛ржорзЗрж▓рж╛! ЁЯШ╡
```

### рж╕ржорж╕рзНржпрж╛ #2: **ржкрж╛рж░рж╕рзНржкрж░рж┐ржХ рж╕ржорзНржкрж░рзНржХ рж╕рзНржкрж╖рзНржЯ ржиржпрж╝**

```
Branch
  тФФтФА managerId тЖТ employees         тЬЕ рж╕ржВржпрзБржХрзНржд
  тФФтФА (ржХрзЛржи рж╕ржорзНржкрж░рзНржХ ржирзЗржЗ User ржПрж░ рж╕рж╛ржерзЗ) тЭМ

Employee
  тФФтФА branchId тЖТ branches           тЬЕ рж╕ржВржпрзБржХрзНржд
  тФФтФА (ржХрзЛржи рж╕ржорзНржкрж░рзНржХ ржирзЗржЗ User ржПрж░ рж╕рж╛ржерзЗ) тЭМ

User
  тФФтФА branchId тЖТ branches           тЬЕ рж╕ржВржпрзБржХрзНржд
  тФФтФА (ржХрзЛржи рж╕ржорзНржкрж░рзНржХ ржирзЗржЗ Employee ржПрж░ рж╕рж╛ржерзЗ) тЭМ
  тФФтФА roleId тЖТ userRoles            тЬЕ рж╕ржВржпрзБржХрзНржд
```

### рж╕ржорж╕рзНржпрж╛ #3: **ржЕржирзБржорждрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржжрзЛржЯрж╛ржирж╛**

```
Employee ржП:
  permissions: ["pos", "inventory", "reports"]  тЖР рж╕рж░рж╛рж╕рж░рж┐ ржЕржирзБржорждрж┐

User ржП:
  roleId: Id<"userRoles">                       тЖР ржнрзВржорж┐ржХрж╛-ржнрж┐рждрзНрждрж┐ржХ
  userRoles.permissions: ["user_management"]   тЖР ржЕржирзБржорждрж┐рж░ рждрж╛рж▓рж┐ржХрж╛

ржХрзЛржиржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ? ЁЯдФ
```

---

## тЬЕ ржХрзА рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ

| ржмрзИрж╢рж┐рж╖рзНржЯрзНржп | рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ | ржоржирзНрждржмрзНржп |
|-----------|----------|--------|
| ржмрзНрж░рж╛ржЮрзНржЪ рждрзИрж░рж┐ ржХрж░рж╛ | тЬЕ | рж╕ржорзНржкрзВрж░рзНржг ржХрж╛ржЬ ржХрж░рзЗ |
| ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рж╛ | тЬЕ | ржХрж┐ржирзНрждрзБ User-ржПрж░ рж╕рж╛ржерзЗ ржиржпрж╝ |
| ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рж╛ | тЬЕ | ржХрж┐ржирзНрждрзБ Employee-ржПрж░ рж╕рж╛ржерзЗ ржиржпрж╝ |
| ржнрзВржорж┐ржХрж╛ ржмрж░рж╛ржжрзНржж | тЪая╕П | ржжрзБржЯрж┐ рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржжрзБржнрж╛ржмрзЗ |
| рж╢рж╛ржЦрж╛ ржЕржирзБржпрж╛ржпрж╝рзА ржлрж┐рж▓рзНржЯрж╛рж░ | тЬЕ | ржХрж╛ржЬ ржХрж░рзЗ |
| ржЕржирзБржорждрж┐ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ | тЭМ | ржХржЦржирзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛ |
| ржЕржбрж┐ржЯ рж▓ржЧ | тЬЕ | ржЖржЫрзЗ ржХрж┐ржирзНрждрзБ рж╕ржорзНржкрзВрж░рзНржг ржиржпрж╝ |

---

## ЁЯЪА рж╕рзБржкрж╛рж░рж┐рж╢: рж╕ржарж┐ржХ ржЕрж░рзНржбрж╛рж░

### **ржкрж░рзНржпрж╛ржпрж╝ 1: ржнрж┐рждрзНрждрж┐ рж╕рзНржерж╛ржкржи ржХрж░рзБржи** (ржПржЦржи рж╢рзБрж░рзБ ржХрж░рзБржи)

```
1я╕ПтГг рж╢рж╛ржЦрж╛ (Branch) рждрзИрж░рж┐ ржХрж░рзБржи
   тФФтФА рж╕ржм рж╢рж╛ржЦрж╛рж░ ржирж╛ржо, ржХрзЛржб, ржарж┐ржХрж╛ржирж╛ ржпрзЛржЧ ржХрж░рзБржи
   тФФтФА ржкрзНрж░рждрж┐ржЯрж┐ рж╢рж╛ржЦрж╛рж░ ржЬржирзНржп ржПржХ ржирзЗрждрзГрждрзНржм ржЬрж╛ржпрж╝ржЧрж╛ ржмрзБржЭрзЗ рж░рж╛ржЦрзБржи

2я╕ПтГг ржкрзНрж░рждрж┐ржЯрж┐ рж╢рж╛ржЦрж╛рж░ ржЬржирзНржп ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐ ржХрж░рзБржи
   тФФтФА рж╢рж╛ржЦрж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи тЖТ ржХрж░рзНржоржЪрж╛рж░рзА ржпрзЛржЧ ржХрж░рзБржи
   тФФтФА ржЕржмрж╕рзНржерж╛ржи (ржкржж): ржорзНржпрж╛ржирзЗржЬрж╛рж░, ржХрзНржпрж╛рж╢рж┐ржпрж╝рж╛рж░, ржмрж┐ржХрзНрж░ржпрж╝, рж╕рзНржЯржХ

3я╕ПтГг рж╢рж╛ржЦрж╛ ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзБржи
   тФФтФА ржкрзНрж░рждрж┐ржЯрж┐ рж╢рж╛ржЦрж╛рж░ ржЬржирзНржп ржПржХржЬржи ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржХрж░рзНржоржЪрж╛рж░рзА
```

### **ржкрж░рзНржпрж╛ржпрж╝ 2: ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж╕рж┐рж╕рзНржЯрзЗржо ржПржХрзАржнрзВржд ржХрж░рзБржи** (ржкрж░ржмрж░рзНрждрзА)

```
4я╕ПтГг ржкрзНрж░рждрж┐ржЯрж┐ ржХрж░рзНржоржЪрж╛рж░рзАрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ рждрзИрж░рж┐ ржХрж░рзБржи
   тФФтФА ржПржХржЗ ржЗржорзЗржЗрж▓, ржлрзЛржи ржирж╛ржорзНржмрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
   тФФтФА ржПржХржЗ рж╢рж╛ржЦрж╛ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи
   тФФтФА ржЙржкржпрзБржХрзНржд ржнрзВржорж┐ржХрж╛ ржмрж░рж╛ржжрзНржж ржХрж░рзБржи

5я╕ПтГг ржЖржкржбрзЗржЯ: Employee рждрзИрж░рж┐рждрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ User рждрзИрж░рж┐ ржХрж░рзБржи
   тФФтФА ржмрзНржпрж╛ржХржПржирзНржбрзЗ ржПржХржЯрж┐ trigger/hook ржпрзЛржЧ ржХрж░рзБржи
   тФФтФА ржХрж░рзНржоржЪрж╛рж░рзА рждрзИрж░рж┐ = ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рждрзИрж░рж┐
```

### **ржкрж░рзНржпрж╛ржпрж╝ 3: ржЕржирзБржорждрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржарж┐ржХ ржХрж░рзБржи** (ржкрж░ржмрж░рзНрждрзА)

```
6я╕ПтГг Employee.permissions рж╕рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рзБржи
   тФФтФА рж╕ржмржХрж┐ржЫрзБ User.role ржерзЗржХрзЗ ржЖрж╕ржмрзЗ

7я╕ПтГг ржнрзВржорж┐ржХрж╛ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзБржи:
   тФЬтФА Super Admin: рж╕ржм ржХрж░рждрзЗ ржкрж╛рж░рзЗ
   тФЬтФА Branch Manager: рж╢рж╛ржЦрж╛ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ + рж╕рзНржЯрж╛ржл ржирж┐ржпрж╝ржирзНрждрзНрж░ржг
   тФЬтФА Cashier: рж╢рзБржзрзБ ржмрж┐ржХрзНрж░ржпрж╝ + рж░рж┐ржЯрж╛рж░рзНржи
   тФЬтФА Stock Manager: ржЗржиржнрзЗржирзНржЯрж░рж┐ ржкрж░рж┐ржЪрж╛рж▓ржирж╛
   тФФтФА Sales Associate: ржмрж┐ржХрзНрж░ржпрж╝ + ржЧрзНрж░рж╛рж╣ржХ
```

---

## ЁЯУК рж╕рзБржкрж╛рж░рж┐рж╢ржХрзГржд ржбрзЗржЯрж╛ ржоржбрзЗрж▓

```typescript
// ржЫрзЛржЯрзЛ ржПржмржВ рж╕рж╣ржЬ:

branches {
  name: string,
  code: string,
  managerId?: Id<"users">,      тЖР рж╢рзБржзрзБржорж╛рждрзНрж░ User ржерзЗржХрзЗ
  managerName?: string,
  // ... ржЕржирзНржпрж╛ржирзНржп
}

users (Convex Auth ржерзЗржХрзЗ) {
  email: string,
  name: string,
  avatar?: string,
  roleId: Id<"userRoles">,
  branchId?: Id<"branches">,
  position?: string,            тЖР "Manager", "Cashier" etc
  isActive: boolean,
  joinDate: number,
}

userRoles {
  name: string,                 тЖР "Super Admin", "Manager"
  permissions: string[],        тЖР ["pos", "inventory"]
  isActive: boolean,
}

// Employee ржЯрзЗржмрж┐рж▓ рж╕рж░рж┐ржпрж╝рзЗ ржжрж┐ржи! ЁЯЧСя╕П
// рж╕ржмржХрж┐ржЫрзБ 'users' ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗржЗ рж╕рж╛ржкрзНрж▓рж╛ржЗ ржХрж░рзБржи
```

---

## ЁЯФз ржжрзНрж░рзБржд рж╕ржорж╛ржзрж╛ржи (ржПржЗ рж╕ржкрзНрждрж╛рж╣рзЗ)

ржпржжрж┐ ржкрзБрж░рзЛ ржкрзБржирж░рзНржЧржаржи ржирж╛ ржХрж░рждрзЗ ржЪрж╛ржи:

### **рж╕рж╛ржзрж╛рж░ржг ржЖржЗржбрж┐ржпрж╝рж╛: ржбрзБржпрж╝рж╛рж▓ рж╕рж┐ржЩрзНржХ**

```
Employee рждрзИрж░рж┐ ржХрж░рзБржи
  тЖУ
рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ User рждрзИрж░рж┐ ржХрж░рзБржи
  тЖУ
ржПржХржЗ branchId ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
  тЖУ
User.role ржерзЗржХрзЗ ржЕржирзБржорждрж┐ ржкрж╛ржи
```

**ржХрзЛржбрзЗ ржкрж░рж┐ржмрж░рзНрждржи:**
```typescript
// employees.ts рждрзИрж░рж┐рж░ ржкрж░рзЗ:

const userId = await createUserFromEmployee({
  email: employeeEmail,
  firstName: employeeName,
  branchId: employeeBranchId,
  roleId: getDefaultRoleForPosition(position),
});

// User ржХрзЗ ржЯрзНрж░рзЗржХ рж░рж╛ржЦрзБржи employee ржП:
employees.userId = userId;
```

---

## тЭМ ржХрж░ржмрзЗржи ржирж╛

```
тЭМ рждрж┐ржиржЯрж┐ ржнрж┐ржирзНржи ржЕржирзБржорждрж┐ рж╕рж┐рж╕рзНржЯрзЗржо ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛
тЭМ ржбрзБржпрж╝рж╛рж▓ ржбрж╛ржЯрж╛ ржПржирзНржЯрзНрж░рж┐ (Employee ржПржмржВ User ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ)
тЭМ Branch ржЫрж╛ржбрж╝рж╛ Employee рждрзИрж░рж┐ ржХрж░рж╛
тЭМ Branch Manager ржПрж░ ржЬржирзНржп ржХрзЛржи ржбрж╛ржЯрж╛ structure ржЫрж╛ржбрж╝рж╛
тЭМ ржЕржирзБржорждрж┐ ржпрж╛ржЪрж╛ржЗ ржирж╛ ржХрж░рзЗ ржХрж╛рж░рзНржпржХрж╛рж░рж┐рждрж╛ ржЪрж╛рж▓рзБ ржХрж░рж╛
```

---

## тЬЕ ржХрж░ржмрзЗржи

```
тЬЕ ржкрзНрж░ржержорзЗ рж╢рж╛ржЦрж╛ рждрзИрж░рж┐ ржХрж░рзБржи
тЬЕ рж╢рж╛ржЦрж╛рж░ ржЬржирзНржп ржорзНржпрж╛ржирзЗржЬрж╛рж░ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи
тЬЕ ржкрзНрж░рждрж┐ржЯрж┐ ржХрж░рзНржоржЪрж╛рж░рзАржХрзЗ ржПржХржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржЕрзНржпрж╛ржХрж╛ржЙржирзНржЯ ржжрж┐ржи
тЬЕ рж╕рзБрж╕рзНржкрж╖рзНржЯ ржнрзВржорж┐ржХрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
тЬЕ ржЕржирзБржорждрж┐ ржХрзЗржирзНржжрзНрж░рзАржпрж╝ржнрж╛ржмрзЗ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзБржи
```

---

## ЁЯУИ ржжрзАрж░рзНржШржорзЗржпрж╝рж╛ржжрзА рж╕рзБржкрж╛рж░рж┐рж╢

### **ржпрж╛ рж░рж╛ржЦрждрзЗ рж╣ржмрзЗ:**
- тЬЕ branches ржЯрзЗржмрж┐рж▓ - ржнрзМржЧрж▓рж┐ржХ ржХрж╛ржарж╛ржорзЛрж░ ржЬржирзНржп
- тЬЕ users ржЯрзЗржмрж┐рж▓ (Convex Auth) - рж▓ржЧржЗржирзЗрж░ ржЬржирзНржп
- тЬЕ userRoles ржЯрзЗржмрж┐рж▓ - ржЕржирзБржорждрж┐рж░ ржЬржирзНржп
- тЬЕ userActivityLog - ржирж┐рж░рзАржХрзНрж╖рж╛рж░ ржЬржирзНржп

### **ржпрж╛ ржорзБржЫрждрзЗ рж╣ржмрзЗ:**
- ЁЯЧСя╕П employees ржЯрзЗржмрж┐рж▓ - users ржП ржорж╛рж░рзНржЬ ржХрж░рзБржи
- ЁЯЧСя╕П Employee Management component - User Management ржП ржорж╛рж░рзНржЬ ржХрж░рзБржи
- ЁЯЧСя╕П duplicate permissions systems - ржПржХржЯрж┐ ржнрзВржорж┐ржХрж╛-ржнрж┐рждрзНрждрж┐ржХ рж╕рж┐рж╕рзНржЯрзЗржо рж░рж╛ржЦрзБржи

### **ржпрж╛ ржпрзЛржЧ ржХрж░рждрзЗ рж╣ржмрзЗ:**
- ЁЯУЭ Staff Performance Dashboard
- ЁЯУК Branch Analytics
- ЁЯФФ Role-Based Notifications
- ЁЯУЛ Shift Management
- ЁЯТ░ Payroll Integration

---

## ЁЯОп рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

| ржкрзНрж░рж╢рзНржи | ржЙрждрзНрждрж░ |
|-------|-------|
| **ржХрзЛржиржЯрж┐ ржкрзНрж░ржержо?** | **рж╢рж╛ржЦрж╛ (Branches) ржкрзНрж░ржержо** |
| **рждрж╛рж░ржкрж░?** | **ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА (Users) ржжрзНржмрж┐рждрзАржпрж╝** |
| **ржХрж░рзНржоржЪрж╛рж░рзА рждрзГрждрзАржпрж╝?** | **ржирж╛! ржХрж░рзНржоржЪрж╛рж░рзА = ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА ржПржХржЗ ржЕржмрж╕рзНржерж╛ржирзЗ** |
| **Staff Management ржХржЦржи?** | **ржкрж░ржмрж░рзНрждрзАрждрзЗ ржЙржирзНржиржд ржмрзИрж╢рж┐рж╖рзНржЯрзНржп рж╣рж┐рж╕рж╛ржмрзЗ** |
| **ржПржЦржи ржжрзНрж░рзБржд ржХрж░рж╛рж░ ржЙржкрж╛ржпрж╝?** | **Employee рждрзИрж░рж┐рж░ рж╕ржоржпрж╝ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ User рждрзИрж░рж┐ ржХрж░рзБржи** |

---

*Generated: February 5, 2026*
