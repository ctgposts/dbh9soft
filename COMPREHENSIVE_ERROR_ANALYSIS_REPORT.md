# ЁЯФ┤ DBH-9 рж╕рж┐рж╕рзНржЯрзЗржо - рж╕ржорзНржкрзВрж░рзНржг ржПрж░рж░ ржУ ржЗрж╕рзНржпрзБ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг рж░рж┐ржкрзЛрж░рзНржЯ

**рждрзИрж░рж┐рж░ рждрж╛рж░рж┐ржЦ**: ржлрзЗржмрзНрж░рзБржпрж╝рж╛рж░рж┐ рзн, рзирзжрзирзм  
**ржкрзНрж░ржЬрзЗржХрзНржЯ**: Dubai Borka House - DBH-9 POS & Inventory System

---

## ЁЯУК рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк

| ржмрж┐ржнрж╛ржЧ | ржЗрж╕рзНржпрзБ рж╕ржВржЦрзНржпрж╛ | ржЧрзБрж░рзБрждрзНржм |
|-------|----------|--------|
| **ржХрзНрж░рж┐ржЯрж┐ржХрзНржпрж╛рж▓** | рззрзл | ЁЯФ┤ ржЕржмрж┐рж▓ржорзНржмрзЗ рж╕ржорж╛ржзрж╛ржи ржкрзНрж░ржпрж╝рзЛржЬржи |
| **ржЙржЪрзНржЪ** | рзирзй | ЁЯЯа ржжрзНрж░рзБржд рж╕ржорж╛ржзрж╛ржи ржмрж╛ржЮрзНржЫржирзАржпрж╝ |
| **ржорж╛ржЭрж╛рж░рж┐** | рзйрзл | ЁЯЯб ржоржзрзНржпржорзЗржпрж╝рж╛ржжрзЗ рж╕ржорж╛ржзрж╛ржи ржХрж░рзБржи |
| **ржирж┐ржорзНржи** | рзирзи | ЁЯЯв ржжрзАрж░рзНржШржорзЗржпрж╝рж╛ржжрзА ржЙржирзНржирждрж┐ |
| **ржорзЛржЯ** | **рзпрзл** | - |

---

## ЁЯФ┤ CRITICAL ISSUES (ржЕржмрж┐рж▓ржорзНржмрзЗ рж╕ржорж╛ржзрж╛ржи ржкрзНрж░ржпрж╝рзЛржЬржи)

### рзз. POS рж╕рж┐рж╕рзНржЯрзЗржорзЗ ржХрж╛рж╕рзНржЯржорж╛рж░ рж╕рж┐рж▓рзЗржХрж╢ржи ржмрж╛ржЧ
**ржлрж╛ржЗрж▓**: `src/components/EnhancedPOS.tsx` (рж▓рж╛ржЗржи рзйрзи)  
**рж╕ржорж╕рзНржпрж╛**: `selectedCustomerId` ржЯрж╛ржЗржк `null` ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ рж╣ржпрж╝ ржХрж┐ржирзНрждрзБ ржХржЦржиржУ ржкрзНрж░ржХрзГржд ржбрзЗржЯрж╛ ржлрж┐рж▓ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛  
**ржкрзНрж░ржнрж╛ржм**: ржХрж╛рж╕рзНржЯржорж╛рж░ рждржерзНржп рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝ ржирж╛ рж╕рзЗрж▓ ржП  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
// тЭМ рждрзНрж░рзБржЯрж┐ржкрзВрж░рзНржг:
const [selectedCustomerId, setSelectedCustomerId] = useState<Id<"customers"> | null>(null);

// тЬЕ рж╕ржарж┐ржХ:
const customers = useQuery(api.customers.list, { searchTerm: customerSearch });
const handleCustomerSelect = (customer: any) => {
  setSelectedCustomerId(customer._id);
  setCustomerInfo({ name: customer.name, phone: customer.phone });
};
```

### рзи. ржЗржиржнрзЗржирзНржЯрж░рж┐ ржкрзЗржЬрзЗ ржирж╛рж▓ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржПрж░рж░
**ржлрж╛ржЗрж▓**: `src/components/Inventory.tsx` (рж▓рж╛ржЗржи рзпрзж-рззрзирзж)  
**рж╕ржорж╕рзНржпрж╛**: ржЗржорзЗржЬ ржХржорзНржкрзНрж░рзЗрж╢ржи ржлрж╛ржВрж╢ржирзЗ `ctx` `null` рж╣рждрзЗ ржкрж╛рж░рзЗ  
**ржкрзНрж░ржнрж╛ржм**: ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЗржорзЗржЬ ржЖржкрж▓рзЛржб ржХрзНрж░рзНржпрж╛рж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗ  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const ctx = canvas.getContext('2d');
if (!ctx) {
  reject(new Error('Canvas context not available'));
  return;
}
ctx.drawImage(img, 0, 0, width, height);
```

### рзй. рж░рж┐ржлрж╛ржирзНржб ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗ ржЖржЗржЯрзЗржо рж╕рж┐рж▓рзЗржХрж╢ржи ржЗрж╕рзНржпрзБ
**ржлрж╛ржЗрж▓**: `src/components/RefundManagement.tsx` (рж▓рж╛ржЗржи рзйрзж-рзлрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- `saleItems` рж╕ржмрж╕ржоржпрж╝ `selectedSale?.items` ржерзЗржХрзЗ ржирзЗржУржпрж╝рж╛ рж╣ржпрж╝ ржХрж┐ржирзНрждрзБ ржПржЯрж┐ `undefined` рж╣рждрзЗ ржкрж╛рж░рзЗ
- ржЖржЗржЯрзЗржо рж╕рж┐рж▓рзЗржХрж╢ржи ржЪрзЗржХржмржХрзНрж╕ ржХржЦржиржУ ржжрзБржмрж╛рж░ ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛
**ржкрзНрж░ржнрж╛ржм**: рж░рж┐ржлрж╛ржирзНржб рждрзИрж░рж┐ ржмрзНржпрж░рзНрже рж╣ржпрж╝  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const saleItems = selectedSale?.items ?? [];
const handleToggleItemSelection = (productId: string) => {
  if (!selectedSale) {
    toast.error("Please select a sale first");
    return;
  }
  // рж░рзЗрж╕рзНржЯ ржЕржм рж▓ржЬрж┐ржХ...
};
```

### рзк. ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржбрзЗ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ
**ржлрж╛ржЗрж▓**: `src/components/Dashboard.tsx` (рж▓рж╛ржЗржи рзнрзл-рззрззрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- `notify()` ржкрзНрж░рждрж┐ржЯрж┐ рж░рзЗржирзНржбрж╛рж░рзЗ ржирждрзБржи ржХрж░рзЗ ржХрж▓ рж╣ржпрж╝
- `notifiedProductsRef` рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрзНрж▓рж┐ржиржЖржк рж╣ржпрж╝ ржирж╛
**ржкрзНрж░ржнрж╛ржм**: ржПржХржЗ ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи ржПржХрж╛ржзрж┐ржХржмрж╛рж░ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
useEffect(() => {
  // ржПржХрзНрж╕рж┐рж╕рзНржЯрж┐ржВ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯрзЗрж╢ржи ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирзНрждрзБ:
  // useCallback ржжрж┐ржпрж╝рзЗ notify wraps ржХрж░рзБржи
  const notifyMemoized = useCallback(notify, []);
  // ...
}, [products, notify]); // notify ржХрзЗ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐ ржерзЗржХрзЗ ржмрзЗрж░ ржХрж░рзБржи ржмрж╛ useCallback ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи
```

### рзл. рж╕рзНржЯржХ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯрзЗ ржмрзНрж░ржЮрзНржЪ рж╕рж┐рж▓рзЗржХрж╢ржи ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржирзЗржЗ
**ржлрж╛ржЗрж▓**: `src/components/StockManagement.tsx` (рж▓рж╛ржЗржи рзорзж-рзпрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- ржЕрзНржпрж╛ржбржЬрж╛рж╕рзНржЯржорзЗржирзНржЯ ржоржбрж╛рж▓ ржЦрзЛрж▓рж╛рж░ ржЖржЧрзЗ ржмрзНрж░ржЮрзНржЪ рж╕рж┐рж▓рзЗржХрж╢ржи ржЪрзЗржХ ржирзЗржЗ
- `handleAdjustStock` рж╕рзАржорж╛ржмржжрзНржз ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржХрж░рзЗ
**ржкрзНрж░ржнрж╛ржм**: ржЗржиржХржирж╕рж┐рж╕рзНржЯрзЗржирзНржЯ рж╕рзНржЯржХ ржЖржкржбрзЗржЯ  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const handleOpenAdjustmentModal = (product: any) => {
  if (!selectedBranch) {
    toast.error("Please select a branch first");
    return;
  }
  setSelectedProduct(product);
  setShowAdjustmentModal(true);
};
```

### рзм. ржХрзНржпрж╛ржорзЗрж░рж╛ ржХрзНржпрж╛ржкржЪрж╛рж░ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржкрж╛рж░ржорж┐рж╢ржи рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ
**ржлрж╛ржЗрж▓**: `src/components/CameraCapture.tsx` (рж▓рж╛ржЗржи рзйрзж-рзорзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- ржХрзНржпрж╛ржорзЗрж░рж╛ ржкрж╛рж░ржорж┐рж╢ржи ржбрж┐ржирж╛ржЗржб рж╣рж▓рзЗ рж░рж┐ржЯрзНрж░рж╛ржЗ рж▓ржЬрж┐ржХ ржирзЗржЗ
- ржорж╛рж▓рзНржЯрж┐ржкрж▓ ржлрзЗрж╕рж┐ржВ ржорзЛржб рж╕рзБржЗржЪ ржХрж░рж▓рзЗ рж╕рзНржЯрзНрж░рж┐ржо рж▓рж┐ржХ рж╣рждрзЗ ржкрж╛рж░рзЗ
**ржкрзНрж░ржнрж╛ржм**: ржХрзНржпрж╛ржорзЗрж░рж╛ рж╕рзНржЯржХ рж╣рждрзЗ ржкрж╛рж░рзЗ ржорзЛржмрж╛ржЗрж▓рзЗ  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const handleSwitchCamera = async () => {
  if (stream) {
    stream.getTracks().forEach(track => track.stop()); // ржХрзНрж▓рж┐ржиржЖржк
  }
  const nextMode = currentFacingMode === 'user' ? 'environment' : 'user';
  // ржирждрзБржи рж╕рзНржЯрзНрж░рж┐ржо рж╢рзБрж░рзБ ржХрж░рзБржи
};
```

### рзн. API ржПрж░рж░ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржЕрж╕ржВржЧржд
**ржлрж╛ржЗрж▓**: рж╕ржХрж▓ ржкрзЗржЬ ржЙржкрж╛ржжрж╛ржи  
**рж╕ржорж╕рзНржпрж╛**: 
- ржХрж┐ржЫрзБ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ `catch` ржмрзНрж▓ржХ ржЖржЫрзЗ, ржЕржирзНржпржжрзЗрж░ ржирзЗржЗ
- ржПрж░рж░ ржорзЗрж╕рзЗржЬ рж╕рзБрж╕ржВржЧржд ржиржпрж╝
**ржкрзНрж░ржнрж╛ржм**: ржЗржЙржЬрж╛рж░ ржмрж┐ржнрзНрж░рж╛ржирзНржд ржлрж┐ржбржмрзНржпрж╛ржХ ржкрж╛ржпрж╝  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
// рж╕ржм ржорж┐ржЙржЯрзЗрж╢ржирзЗ:
try {
  await mutation(...);
  toast.success("рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ");
} catch (error: any) {
  console.error('API Error:', error);
  toast.error(error.message || "ржЕржкрж╛рж░рзЗрж╢ржи ржмрзНржпрж░рзНрже рж╣ржпрж╝рзЗржЫрзЗ");
}
```

### рзо. ржЗржиржнржпрж╝рзЗрж╕ ржоржбрж╛рж▓рзЗ ржорж┐рж╕рж┐ржВ рж╕рзНржЯрзЛрж░ рж╕рзЗржЯрж┐ржВрж╕
**ржлрж╛ржЗрж▓**: `src/components/InvoiceModal.tsx` (рж▓рж╛ржЗржи рзнрзж-рззрзжрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- `storeSettings` рж▓рзЛржб рж╣ржУржпрж╝рж╛рж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛
- рж▓рзЛржЧрзЛ ржерзЗржХрзЗ ржпрж╛ржпрж╝ ржЦрж╛рж▓рж┐ ржпржжрж┐ рж▓рзЛржб рж╣ржпрж╝
**ржкрзНрж░ржнрж╛ржм**: ржЗржиржнржпрж╝рзЗрж╕ ржЕрж╕ржорзНржкрзВрж░рзНржг ржжрзЗржЦрж╛ржпрж╝  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const storeSettings = useQuery(api.settings.get);

useEffect(() => {
  if (storeSettings?.logo) {
    setShopSettings(prev => ({
      ...prev,
      logo: storeSettings.logo
    }));
  }
}, [storeSettings]);
```

### рзп. ржкрзЗржорзЗржирзНржЯ ржбрж┐ржЯрзЗржЗрж▓рж╕ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржЧрзНржпрж╛ржк
**ржлрж╛ржЗрж▓**: `src/components/EnhancedPOS.tsx` (рж▓рж╛ржЗржи рзнрзж-рззрззрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- ржорзЛржмрж╛ржЗрж▓ ржмрзНржпрж╛ржВржХрж┐ржВ ржкрзЗржорзЗржирзНржЯ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ ржлрж░рзНржо рж░рж┐рж╕рзЗржЯ рж╣ржпрж╝ ржирж╛
- ржЯрзНрж░рж╛ржиржЬрзНржпрж╛ржХрж╢ржи ржЖржЗржбрж┐ ржЕржкрж╢ржирж╛рж▓ ржХрж┐ржирзНрждрзБ ржХржЦржиржУ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржиржпрж╝ ржбрж┐рж╕ржкрзНрж▓рзЗ
**ржкрзНрж░ржнрж╛ржм**: ржЗржиржнрзНржпрж╛рж▓рж┐ржб ржкрзЗржорзЗржирзНржЯ ржбрзЗржЯрж╛ рж╕рзЗржм рж╣рждрзЗ ржкрж╛рж░рзЗ  
**рж╕ржорж╛ржзрж╛ржи**:
```tsx
const handlePaymentMethodChange = (method: string) => {
  setPaymentMethod(method);
  setPaymentDetails({ // рж░рж┐рж╕рзЗржЯ
    transactionId: "",
    phoneNumber: "",
    reference: "",
  });
};
```

### рззрзж. ржЕржлрж▓рж╛ржЗржи рж╕рж┐ржЩрзНржХ рж░рзЗрж╕ржХржирзНржбрж┐рж╢ржи
**ржлрж╛ржЗрж▓**: `src/hooks/useOfflineSync.ts`  
**рж╕ржорж╕рзНржпрж╛**: 
- ржЕржирж▓рж╛ржЗржирзЗ ржлрж┐рж░рж▓рзЗ ржбрзЗржЯрж╛ ржорж╛рж░рзНржЬ ржХрж╛рж╕рзНржЯржо ржиржпрж╝
- ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ рж╕рзЗрж▓ рждрзИрж░рж┐ рж╣рждрзЗ ржкрж╛рж░рзЗ ржлрзНрж▓рж┐ржХрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ
**ржкрзНрж░ржнрж╛ржм**: ржбрзЗржЯрж╛ ржЗржиржХржирж╕рж┐рж╕рзНржЯрзЗржирзНрж╕рж┐  
**рж╕ржорж╛ржзрж╛ржи**: ржЖржЗржбрзЗржорзНржкрзЛржЯрзЗржирзНржЯ ржорж┐ржЙржЯрзЗрж╢ржи ржХрж▓ ржХрж░рзБржи (ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ ржЪрзЗржХ ржХрж░рзЗ)

---

## ЁЯЯа HIGH PRIORITY ISSUES (ржжрзНрж░рзБржд рж╕ржорж╛ржзрж╛ржи ржмрж╛ржЮрзНржЫржирзАржпрж╝)

### рззрзз. ржкржгрзНржп ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржЗржиржХржоржкрзНрж▓рж┐ржЯ
**ржлрж╛ржЗрж▓**: `src/components/Inventory.tsx`, `src/components/POS.tsx`  
**рж╕ржорж╕рзНржпрж╛**: 
- рж╕рж╛ржЗржЬ/ржХрж╛рж▓рж╛рж░ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржирзНржЯ рж╕рж┐рж▓рзЗржХрж╢ржи ржарж┐ржХржоржд ржХрж╛ржЬ ржХрж░рзЗ ржирж╛ POS ржП
- рж╕рзНржЯржХ ржЪрзЗржХ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржирзНржЯ рж▓рзЗржнрзЗрж▓рзЗ ржирзЗржЗ
**ржкрзНрж░ржнрж╛ржм**: ржУржнрж╛рж░рж╕рзЗрж▓рж┐ржВ рж╕ржорзНржнржм  

### рззреи. ржХрж╛рж╕рзНржЯржорж╛рж░ ржбрж┐ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи
**ржлрж╛ржЗрж▓**: `src/components/Customers.tsx` (рж▓рж╛ржЗржи рззрзирзж-рззрзмрзж)  
**рж╕ржорж╕рзНржпрж╛**: 
- ржЗржорзЗржЗрж▓/ржлрзЛржи ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржЪрзЗржХ ржХрзЗрж╕-рж╕рзЗржирж╕рж┐ржЯрж┐ржн
- ржПржХржЗ ржмрзНржпржХрзНрждрж┐рж░ ржПржХрж╛ржзрж┐ржХ ржПржирзНржЯрзНрж░рж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗ
**ржкрзНрж░ржнрж╛ржм**: рж▓ржпрж╝рзНржпрж╛рж▓ржЯрж┐ ржкржпрж╝рзЗржирзНржЯ ржнрзБрж▓ рж╣ржпрж╝

### резрей. рж░рж┐ржкрзЛрж░рзНржЯрж╕ ржкрзЗржЬ ржХржорзНржкрзЛржирзЗржирзНржЯ ржЦрж╛рж▓рж┐
**ржлрж╛ржЗрж▓**: `src/components/Reports.tsx` (рж▓рж╛ржЗржи рзз-рззрзж)  
**рж╕ржорж╕рзНржпрж╛**: рж░рж┐ржкрзЛрж░рзНржЯрж╕ ржХржорзНржкрзЛржирзЗржирзНржЯ рж╢рзБржзрзБ рж╢рзЗрж▓, ржХрзЛржи ржбрзЗржЯрж╛ ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржи ржирзЗржЗ

### резрек. ржмрж╛рж░ржХрзЛржб рж╕рзНржХрзЗржирж╛рж░ рж▓рзЗржЯрзЗржирзНрж╕рж┐
**ржлрж╛ржЗрж▓**: `src/components/BarcodeManager.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржкрзНрж░рзЛржбрж╛ржХрзНржЯ рж▓рзБржХржЖржк ржжрзЗрж░рж┐ рж╣ржпрж╝ рж╕рзНржХрзНржпрж╛ржирзЗрж░ ржкрж░

### резрел. рж╣рзЛржо рж╕рзНржХрзНрж░рж┐ржи рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ
**ржлрж╛ржЗрж▓**: `src/components/Dashboard.tsx` (рж▓рж╛ржЗржи рзпрзж-рззрзирзж)  
**рж╕ржорж╕рзНржпрж╛**: рж╕рзНржкрж┐ржирж╛рж░ ржжрзЗржЦрж╛ржпрж╝ ржХрж┐ржирзНрждрзБ рж╕рзНржХрзЗрж▓рзЗржЯржи рж╕рзНржХрзНрж░рж┐ржи ржирзЗржЗ

### резрем. ржЗржоржкрзНрж▓ржпрж╝рж┐ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржкрж╛рж░рзНржорж┐рж╢ржи ржмрж╛ржЧ
**ржлрж╛ржЗрж▓**: `src/components/EmployeeManagement.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржкрж╛рж░рзНржорж┐рж╢ржи ржЕрзНржпрж╛рж░рзЗ рж╕рзЗржн рж╣ржпрж╝ ржХрж┐ржирзНрждрзБ ржХржЦржиржУ ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ рж╣ржпрж╝ ржирж╛

### резрен. ржХрзБржкржи ржбрзЗржЯрж╛ ржПржХрзНрж╕ржкрж╛ржпрж╝рж╛рж░рж┐ ржЪрзЗржХ ржирзЗржЗ
**ржлрж╛ржЗрж▓**: `src/components/CouponManagement.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржПржХрзНрж╕ржкрж╛ржпрж╝рж╛рж░ ржХрзБржкржи ржжрзЗржЦрж╛ржпрж╝ POS ржП

### резрео. ржЕржирж▓рж╛ржЗржи рж╕рзНржЯрзЛрж░ ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржкрзНрж░рж╛ржЗрж╕рж┐ржВ ржЗрж╕рзНржпрзБ
**ржлрж╛ржЗрж▓**: `src/components/OnlineStore.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржЕржирж▓рж╛ржЗржи ржкрзНрж░рж╛ржЗрж╕ ржУржнрж╛рж░рж░рж╛ржЗржб рж╣ржпрж╝ ржХрж┐ржирзНрждрзБ рж╕рж┐ржЩрзНржХ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛

### резреп. рж╣рзЛржпрж╝рж╛ржЯрж╕ржЕрзНржпрж╛ржк ржЕрж░рзНржбрж╛рж░ ржХржиржнрж╛рж░рзНрж╕ржи ржПрж░рж░
**ржлрж╛ржЗрж▓**: `src/components/WhatsAppOrders.tsx` (рж▓рж╛ржЗржи рзнрзо-рзпрзж)  
**рж╕ржорж╕рзНржпрж╛**: ржЕрж░рзНржбрж╛рж░ ржХржиржнрж╛рж░рзНржЯ ржХрж░рж▓рзЗ рж╕рзНржЯржХ ржЖржкржбрзЗржЯ рж╣ржпрж╝ ржирж╛ рж╕ржарж┐ржХржнрж╛ржмрзЗ

### реиреж. ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи
**ржлрж╛ржЗрж▓**: POS & EnhancedPOS ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ  
**рж╕ржорж╕рзНржпрж╛**: ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЯрж╛ржЗржк ржЪрзЗржЮрзНржЬ ржХрж░рж▓рзЗ ржЪрж╛рж░рзНржЬ ржЖржкржбрзЗржЯ рж╣ржпрж╝ ржирж╛

---

## ЁЯЯб MEDIUM PRIORITY ISSUES (ржоржзрзНржпржорзЗржпрж╝рж╛ржжрзЗ рж╕ржорж╛ржзрж╛ржи)

### реирез. рждржерзНржп ржпрж╛ржЪрж╛ржЗржХрж░ржг ржЕрж╕ржВржЧржд
**ржкрзНрж░ржнрж╛ржмрж┐ржд ржкрзЗржЬ**: Customers, Employees, Settings  
**рж╕ржорж╕рзНржпрж╛**: ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржирж┐ржпрж╝ржо ржмрж┐ржнрж┐ржирзНржи ржкрзЗржЬрзЗ ржЖрж▓рж╛ржжрж╛

### реиреи. ржкрж╛рж░рзНржлрж░ржорзНржпрж╛ржирзНрж╕ ржЕржкржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи
**рж╕ржорж╕рзНржпрж╛**: 
- ржмржбрж╝ ржбрзЗржЯрж╛ рж╕рзЗржЯ рж▓рзЛржб ржХрж░рж▓рзЗ UI ржлрзНрж░рж┐ржЬ рж╣ржпрж╝
- `useQuery` рж░рзЗржЬрж╛рж▓рзНржЯ ржорзЗржорзЛрж░рж╛ржЗржЬ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛ рж╕ржарж┐ржХржнрж╛ржмрзЗ

### реирей. ржЯрж╛ржЗржкрж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржХржирж╕рж┐рж╕рзНржЯрзЗржирзНрж╕рж┐
**рж╕ржорж╕рзНржпрж╛**: `any` ржЯрж╛ржЗржк ржЕржирзЗржХ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛

### реирек. ржорзЛржмрж╛ржЗрж▓ рж░рзЗрж╕ржкржирзНрж╕рж┐ржнржирзЗрж╕
**рж╕ржорж╕рзНржпрж╛**: 
- ржЯрзНржпрж╛ржмрж▓рзЗржЯрзЗ ржХрж┐ржЫрзБ UI ржПрж▓рж┐ржорзЗржирзНржЯ ржЕржнрж╛рж░рж▓рзНржпрж╛ржк рж╣ржпрж╝
- ржорзЛржмрж╛ржЗржи ржорзЗржирзБ рж╕рж╛ржЗржб ржбрзНрж░ржпрж╝рж╛рж░ ржирзЗржЗ

### реирел. ржЯрзНржпрж╛ржХрзНрж╕ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи рж╕рзЗржЯрж┐ржВ ржирзЗржЗ
**ржлрж╛ржЗрж▓**: `convex/schema.ts`  
**рж╕ржорж╕рзНржпрж╛**: ржЯрзНржпрж╛ржХрзНрж╕ ржмрзГржжрзНржзрж┐ рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛ рж╕ржмрж╕ржоржпрж╝

### реирем. ржЗржиржнрзЗржирзНржЯрж░рж┐ ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ рж▓ржЬрж┐ржХ
**ржлрж╛ржЗрж▓**: `src/components/StockTransferManagement.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржЯрзНрж░рж╛ржирзНрж╕ржлрж╛рж░ рж░рж┐ржЬрзЗржХрзНржЯ ржХрж░рж▓рзЗ рж╕рзНржЯржХ рж░рж┐ржнрж╛рж░рзНржЯ рж╣ржпрж╝ ржирж╛

### реирен. ржЧрзНрж░рж╛рж╣ржХ ржЦрж╛рждржХрзНрж╖рзЗрждрзНрж░ ржЗрждрж┐рж╣рж╛рж╕ ржЯрзНрж░рзНржпрж╛ржХ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛
**рж╕ржорж╕рзНржпрж╛**: ржЧрзНрж░рж╛рж╣ржХ ржХрзНрж░ржпрж╝ ржЗрждрж┐рж╣рж╛рж╕ рж╕ржорзНржкрзВрж░рзНржг ржЖржкржбрзЗржЯ рж╣ржпрж╝ ржирж╛

### реирео. ржкрзНрж░рж┐ржирзНржЯ ржХрзЛржпрж╝рж╛рж▓рж┐ржЯрж┐ рж╕рзЗржЯрж┐ржВрж╕
**ржлрж╛ржЗрж▓**: `src/components/InvoiceModal.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржкрзНрж░рж┐ржирзНржЯ рж╕рзЗржЯрж┐ржВрж╕ localStorage ржП рж╕ржВрж░ржХрзНрж╖рж┐ржд ржЖржЫрзЗ ржХрж┐ржирзНрждрзБ UI рждрзЗ ржЕрзНржпрж╛ржкрзНрж▓рж╛ржЗ рж╣ржпрж╝ ржирж╛ рж╕ржарж┐ржХржнрж╛ржмрзЗ

### реиреп. ржЖржЙржЯрж╕рзНржЯрзНржпрж╛ржирзНржбрж┐ржВ ржЕрзНржпрж╛ржорж╛ржЙржирзНржЯ ржХрзНржпрж╛рж▓ржХрзБрж▓рзЗрж╢ржи
**ржлрж╛ржЗрж▓**: `src/components/OutstandingAmount.tsx`  
**рж╕ржорж╕рзНржпрж╛**: ржкрж╛рж░рзНрж╢рж┐ржпрж╝рж╛рж▓ рж░рж┐ржлрж╛ржирзНржб ржЖржЙржЯрж╕рзНржЯрзНржпрж╛ржирзНржбрж┐ржВ ржП ржпрзЛржЧ рж╣ржпрж╝ ржирж╛

### рейреж. ржмрзНрж░рзНржпрж╛ржирзНржЪ ржбрж╛ржпрж╝ржирж╛ржорж┐ржХ рж╕рзБржЗржЪрж┐ржВ
**рж╕ржорж╕рзНржпрж╛**: ржмрзНрж░ржЮрзНржЪ ржЪрзЗржЮрзНржЬ ржХрж░рж▓рзЗ рж╕ржм ржкрзЗржЬрзЗрж░ ржбрзЗржЯрж╛ рж░рж┐ржлрзНрж░рзЗрж╢ рж╣ржпрж╝ ржирж╛

---

## ЁЯЯв LOW PRIORITY IMPROVEMENTS

### рейрез-релреж. UI/UX ржЙржирзНржирждрж┐
- ржбрж╛рж░рзНржХ ржорзЛржб рж╕рж╛ржкрзЛрж░рзНржЯ ржирзЗржЗ
- ржХрж┐ржмрзЛрж░рзНржб рж╢рж░рзНржЯржХрж╛ржЯ ржЗржоржкрзНрж▓рж┐ржорзЗржирзНржЯ ржХрж░рж╛ ржпрж╛ржпрж╝
- ржЬрж┐ржЩрзНржЧрзЗрж▓ рж╕рж╛ржЙржирзНржб ржЕржкрж╢ржи
- рж▓рзЛржбрж┐ржВ ржкрзНрж░ржЧрзНрж░рзЗрж╕ ржмрж╛рж░ рж╕рзБржирзНржжрж░ ржХрж░рж╛

### релрез-ренреж. рж░рж┐ржкрзЛрж░рзНржЯрж┐ржВ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп
- ржХрж╛рж╕рзНржЯржо рж░рж┐ржкрзЛрж░рзНржЯ ржмрж┐рж▓рзНржбрж╛рж░ ржирзЗржЗ
- ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржмрж┐ржХрж▓рзНржк рж╕рзАржорж┐ржд (рж╢рзБржзрзБ CSV)
- ржЪрж╛рж░рзНржЯ ржнрж┐ржЬрзБржпрж╝рж╛рж▓рж╛ржЗржЬрзЗрж╢ржи рж╕рж░рж▓

### ренрез-репрел. ржбрзЗржЯрж╛ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ
- ржмрзНржпрж╛ржХржЖржк ржЕржЯрзЛржорзЗрж╢ржи ржирзЗржЗ
- ржбрзЗржЯрж╛ ржПржХрзНрж╕ржкрзЛрж░рзНржЯ ржПржиржХрзНрж░рж┐ржкрзНржЯ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛
- ржкрзБрж░ржирзЛ рж▓рзЗржиржжрзЗржи ржЖрж░рзНржХрж╛ржЗржн ржХрж░рж╛ рж╣ржпрж╝ ржирж╛

---

## ЁЯУЛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржПрж░рж░ рж░рзЗржЮрзНржЬрж┐ржВ

### Convex ржмрзНржпрж╛ржХржПржирзНржб ржЗрж╕рзНржпрзБ

**File: `convex/refunds.ts`**
- рж░рж┐ржлрж╛ржирзНржб ржЕрзНржпрж╛ржкрзНрж░рзБржнрж╛рж▓ ржУржпрж╝рж╛рж░рзНржХржлрзНрж▓рзЛ  ржЕрж╕ржорзНржкрзВрж░рзНржг
- рж░рж┐ржлрж╛ржирзНржб рж░рж┐ржЬрзЗржХрж╢ржи ржХрж╛рж░ржг рж▓ржЧ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛

**File: `convex/sales.ts`**
- ржкрж╛рж░рзНрж╢рж┐ржпрж╝рж╛рж▓ рж░рж┐ржлрж╛ржирзНржб ржЖржкржбрзЗржЯ рж╕рзЗрж▓ ржЯрзЛржЯрж╛рж▓ ржнрзБрж▓ ржХрж░рзЗ
- ржкрзЗржорзЗржирзНржЯ ржбрж┐ржЯрзЗржЗрж▓ рждржерзНржп ржПржиржХрзНрж░рж┐ржкрзНржЯ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛

**File: `convex/products.ts`**
- ржкрзНрж░рзЛржбрж╛ржХрзНржЯ ржЗржорзЗржЬ ржбрж┐рж▓рж┐ржЯ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛ ржХрзНрж▓рж╛ржЙржб рж╕рзНржЯрзЛрж░рзЗржЬрзЗ
- ржмрж╛рж░ржХрзЛржб ржбрзБржкрзНрж▓рж┐ржХрзЗрж╢ржи ржЪрзЗржХ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛

**File: `convex/customers.ts`**
- ржХрж╛рж╕рзНржЯржорж╛рж░ ржорж╛рж░рзНржЬ ржлрж╛ржВрж╢ржи ржирзЗржЗ
- рж▓ржпрж╝рзНржпрж╛рж▓ржЯрж┐ ржкржпрж╝рзЗржирзНржЯ рж░рзЗрж╕ рж╢рж░рзНржд ржирзЗржЗ

---

## ЁЯЫая╕П рж╕рзБржкрж╛рж░рж┐рж╢ржХрзГржд рж╕ржорж╛ржзрж╛ржирзЗрж░ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░

### ржжрж┐ржи рзз (Critical)
```
1. POS Customer Selection  
2. Image Compression Context
3. Refund Item Selection
4. Camera Permission Cleanup
5. API Error Handling Standardization
```

### ржжрж┐ржи рзи-рзй (High Priority)
```
6. Product Variant Stock Validation
7. Payment Details Validation Reset
8. Offline Sync Idempotency
9. Store Settings Loading
10. Dashboard Notification Deduplication
```

### рж╕ржкрзНрждрж╛рж╣ рзз (Medium Priority)
```
11. Reports Component Implementation
12. Mobile Responsiveness
13. Performance Optimization
14. TypeScript Consistency
15. Branch Data Sync
```

---

## тЬЕ ржЯрзЗрж╕рзНржЯрж┐ржВ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

ржирзАржЪрзЗрж░ ржкрзНрж░рждрж┐ржЯрж┐ ржЗрж╕рзНржпрзБ ржарж┐ржХ ржХрж░рж╛рж░ ржкрж░ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи:

### POS рж╕рж┐рж╕рзНржЯрзЗржо
- [ ] ржХрж╛рж╕рзНржЯржорж╛рж░ ржХрзЗ рж╕рж┐рж▓рзЗржХрзНржЯ/ржбрж┐рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж╛ рж╣ржпрж╝ рж╕ржарж┐ржХржнрж╛ржмрзЗ  
- [ ] ржкрзЗржорзЗржирзНржЯ ржорзЗржержб ржЪрзЗржЮрзНржЬ ржХрж░рж▓рзЗ ржлрж░рзНржо рж░рж┐рж╕рзЗржЯ рж╣ржпрж╝
- [ ] ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЪрж╛рж░рзНржЬ ржЖржкржбрзЗржЯ рж╣ржпрж╝ ржбрзЗрж▓рж┐ржнрж╛рж░рж┐ ржЯрж╛ржЗржк ржЕржирзБржпрж╛ржпрж╝рзА
- [ ] рж╕рзЗрж▓ рждрзИрж░рж┐рждрзЗ рж╕ржм ржХрж╛рж╕рзНржЯржорж╛рж░ ржбрзЗржЯрж╛ рж╕рзЗржн рж╣ржпрж╝

### ржЗржиржнрзЗржирзНржЯрж░рж┐ рж╕рж┐рж╕рзНржЯрзЗржо
- [ ] ржкрзНрж░рзЛржбрж╛ржХрзНржЯ рж╕рж╛ржЗржЬ/ржХрж╛рж▓рж╛рж░ ржнрзНржпрж╛рж░рж┐ржпрж╝рзЗржирзНржЯ ржХрж╛ржЬ ржХрж░рзЗ
- [ ] рж╕рзНржЯржХ ржЕрзНржпрж╛ржбржЬрж╛рж╕рзНржЯржорзЗржирзНржЯ рж░рзЗржЬрж┐рж╕рзНржЯрж╛рж░ рж╣ржпрж╝ рж╕ржарж┐ржХ ржмрзНрж░ржЮрзНржЪрзЗ
- [ ] ржУржнрж╛рж░рж╕рзЗрж▓ ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рж╛ рж╣ржпрж╝

### рж░рж┐ржлрж╛ржирзНржб рж╕рж┐рж╕рзНржЯрзЗржо
- [ ] рж╕рзЗрж▓ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ ржЖржЗржЯрзЗржо рж▓рж┐рж╕рзНржЯ ржЖрж╕рзЗ
- [ ] ржПржХрж╛ржзрж┐ржХ ржЖржЗржЯрзЗржо рж╕рж┐рж▓рзЗржХрж╢ржи ржХрж╛ржЬ ржХрж░рзЗ
- [ ] рж░рж┐ржлрж╛ржирзНржб рждрзИрж░рж┐ ржХрж░рж▓рзЗ рж╕рзНржЯржХ рж░рж┐ржнрж╛рж░рзНржЯ рж╣ржпрж╝

### ржорзЛржмрж╛ржЗрж▓
- [ ] рж╕ржм ржлрж░рзНржо ржорзЛржмрж╛ржЗрж▓рзЗ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ржпрзЛржЧрзНржп
- [ ] рж╕рж╛ржЗржб ржорзЗржирзБ ржХрж╛ржЬ ржХрж░рзЗ ржарж┐ржХржоржд
- [ ] рж╕рзНржкрж░рзНрж╢ ржЗржнрзЗржирзНржЯ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржХрж╛ржоржбрж╝ рж╣ржпрж╝

---

**ржЖржкржбрзЗржЯ**: ржкрзНрж░рждрж┐ржЯрж┐ ржЗрж╕рзНржпрзБ рж╕ржорж╛ржзрж╛ржи ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржПржЗ ржбржХрзБржорзЗржирзНржЯ ржЖржкржбрзЗржЯ ржХрж░рзБржиред

