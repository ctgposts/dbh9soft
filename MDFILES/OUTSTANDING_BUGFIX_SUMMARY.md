# OutstandingAmount.tsx - ржлрж┐ржХрзНрж╕ ржХрж░рж╛ ржЗрж╕рзНржпрзБ рж╕рж╛ржорж╛рж░рж┐

**рждрж╛рж░рж┐ржЦ:** ржЬрж╛ржирзБржпрж╝рж╛рж░рж┐ рзйрзж, рзирзжрзирзм  
**рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕:** тЬЕ рж╕ржорж╕рзНржд ржЗрж╕рзНржпрзБ ржлрж┐ржХрзНрж╕ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ

---

## ЁЯФз ржлрж┐ржХрзНрж╕ ржХрж░рж╛ ржЗрж╕рзНржпрзБ

### рзз. **Dummy Customer ржПржмржВ Branch ID** тЭМ тЖТ тЬЕ
**рж╕ржорж╕рзНржпрж╛:**
```typescript
customerId: "dummy-customer" as Id<"customers">, // тЭМ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛
branchId: "dummy-branch" as Id<"branches">, // тЭМ ржХрж╛ржЬ ржХрж░рзЗ ржирж╛
```

**рж╕ржорж╛ржзрж╛ржи:**
- ржХрж╛рж╕рзНржЯржорж╛рж░ ржПржмржВ ржмрзНрж░рзНржпрж╛ржирзНржЪ ржбрзНрж░ржкржбрж╛ржЙржи рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- ржкрзНрж░ржХрзГржд ID ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ ржПржЦржи
- ржЕржЯрзЛ-ржлрж┐рж▓ ржлрж┐рж▓рзНржб (ржирж╛ржо, ржлрзЛржи, ржЗржорзЗржЗрж▓, ржЗрждрзНржпрж╛ржжрж┐)

**ржкрж░рж┐ржмрж░рзНрждрж┐ржд ржХрзЛржб:**
```typescript
// State ржЖржкржбрзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
const [newOutstanding, setNewOutstanding] = useState({
  customerId: "",      // тЬЕ ржПржЦржи ржЖрж╕рж▓ ржЖржЗржбрж┐ ржерж╛ржХржмрзЗ
  branchId: "",        // тЬЕ ржПржЦржи ржЖрж╕рж▓ ржЖржЗржбрж┐ ржерж╛ржХржмрзЗ
  // ...ржмрж╛ржХрж┐ ржлрж┐рж▓рзНржб
});

// API ржХрж▓ ржЖржкржбрзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
await createOutstanding({
  customerId: newOutstanding.customerId as Id<"customers">, // тЬЕ ржЖрж╕рж▓ ржЖржЗржбрж┐
  branchId: newOutstanding.branchId as Id<"branches">, // тЬЕ ржЖрж╕рж▓ ржЖржЗржбрж┐
  // ...ржмрж╛ржХрж┐ ржбрзЗржЯрж╛
});
```

---

### рзи. **ржХрж╛рж╕рзНржЯржорж╛рж░ ржПржмржВ ржмрзНрж░рзНржпрж╛ржирзНржЪ рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржирзЗржЗ** тЭМ тЖТ тЬЕ
**рж╕ржорж╕рзНржпрж╛:**
- ржлрж░рзНржорзЗ ржХрж╛рж╕рзНржЯржорж╛рж░ ржПржмржВ ржмрзНрж░рзНржпрж╛ржирзНржЪ ржмрзЗржЫрзЗ ржирзЗржУржпрж╝рж╛рж░ ржХрзЛржи ржЙржкрж╛ржпрж╝ ржЫрж┐рж▓ ржирж╛
- ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓рж┐ ржирж╛ржо ржЯрж╛ржЗржк ржХрж░рждрзЗ рж╣рждрзЛ

**рж╕ржорж╛ржзрж╛ржи:**
- Dropdown рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
- Customers рж▓рж┐рж╕рзНржЯ ржлрзЗржЪ ржХрж░рж╛ рж╣ржпрж╝
- Branches рж▓рж┐рж╕рзНржЯ ржлрзЗржЪ ржХрж░рж╛ рж╣ржпрж╝
- рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржЕржирзНржпрж╛ржирзНржп ржлрж┐рж▓рзНржб ржлрж┐рж▓ рж╣ржпрж╝

**ржирждрзБржи ржХрзЛржб:**
```typescript
// Queries ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
const customers = useQuery(api.customers.list, { searchTerm: undefined });
const branches = useQuery(api.branches.list, {});

// ржлрж░рзНржорзЗ dropdown рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ
<select 
  value={newOutstanding.customerId}
  onChange={(e) => {
    const selectedCustomer = customers?.find(c => c._id === e.target.value);
    setNewOutstanding({
      ...newOutstanding,
      customerId: e.target.value,
      customerName: selectedCustomer?.name || "",
      customerPhone: selectedCustomer?.phone || "",
      customerEmail: selectedCustomer?.email || "",
    });
  }}
>
  {customers?.map(c => (
    <option key={c._id} value={c._id}>
      {c.name} {c.phone ? `(${c.phone})` : ""}
    </option>
  ))}
</select>
```

---

### рзй. **рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ ржПржмржВ ржЗржЙржЬрж╛рж░ ржлрж┐ржбржмрзНржпрж╛ржХ** тЭМ тЖТ тЬЕ
**рж╕ржорж╕рзНржпрж╛:**
- ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржХрзЛржи ржнрж┐ржЬрзНржпрзБржпрж╝рж╛рж▓ ржлрж┐ржбржмрзНржпрж╛ржХ ржЫрж┐рж▓ ржирж╛
- ржбрж╛ржмрж▓ ржХрзНрж▓рж┐ржХ ржХрж░рж╛ ржпрж╛ржпрж╝
- ржЗржЙржЬрж╛рж░ ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗ ржирж╛ рж╕рзЗржн рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛

**рж╕ржорж╛ржзрж╛ржи:**
- Loading state ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржкрзНрж░рждрж┐ржЯрж┐ ржлрж░рзНржорзЗрж░ ржЬржирзНржп
- ржмрж╛ржЯржи disabled ржХрж░рж╛ рж╣ржпрж╝ рж╕рзЗржнрж┐ржВ ржПрж░ рж╕ржоржпрж╝
- "Saving..." ржЯрзЗржХрзНрж╕ржЯ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝

**ржирждрзБржи рж╕рзНржЯрзЗржЯ:**
```typescript
const [isSubmittingOutstanding, setIsSubmittingOutstanding] = useState(false);
const [isSubmittingPayment, setIsSubmittingPayment] = useState(false);
const [isSubmittingFollowup, setIsSubmittingFollowup] = useState(false);
```

**ржмрж╛ржЯржи ржЖржкржбрзЗржЯ:**
```typescript
<button
  type="submit"
  disabled={isSubmittingPayment}
  className="... disabled:bg-gray-400 disabled:cursor-not-allowed"
>
  {isSubmittingPayment ? "Saving..." : "Save Payment"}
</button>
```

---

### рзк. **ржкрзЗржорзЗржирзНржЯ рж░рзЗржХрж░рзНржбрж┐ржВ-ржПрж░ ржкрж░рзЗ ржбрзЗржЯрж╛ рж░рж┐ржлрзНрж░рзЗрж╢** тЭМ тЖТ тЬЕ
**рж╕ржорж╕рзНржпрж╛:**
- ржкрзЗржорзЗржирзНржЯ рж╕рзЗржн ржХрж░рж╛рж░ ржкрж░рзЗ ржЙржЗржирзНржбрзЛ ржЖржкржбрзЗржЯ рж╣рждрзЛ ржирж╛
- ржЗржЙржЬрж╛рж░ рж░рж┐ржлрзНрж░рзЗрж╢ ржХрж░рждрзЗ рж╣рждрзЛ

**рж╕ржорж╛ржзрж╛ржи:**
- Slight delay ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ (500ms)
- Outstanding list ржерзЗржХрзЗ ржЖржкржбрзЗржЯрзЗржб ржбрзЗржЯрж╛ ржлрзЗржЪ ржХрж░рж╛ рж╣ржпрж╝
- State ржЖржкржбрзЗржЯ рж╣ржпрж╝

**ржХрзЛржб:**
```typescript
setTimeout(() => {
  if (outstandingList) {
    const updated = outstandingList.find(
      (o) => o._id === selectedOutstanding._id
    );
    if (updated) {
      setSelectedOutstanding(updated);
    }
  }
}, 500);
```

---

### рзл. **ржлрж░рзНржо рж░рж┐рж╕рзЗржЯ ржПржмржВ ржЯрзНржпрж╛ржм ржЪрзЗржЮрзНржЬ** тЭМ тЖТ тЬЕ
**рж╕ржорж╕рзНржпрж╛:**
- ржирждрзБржи рж░рзЗржХрж░рзНржб рж╕рзЗржн ржХрж░рж╛рж░ ржкрж░рзЗ ржЯрзНржпрж╛ржм ржЕржЯрзЛржорзНржпрж╛ржЯрж┐ржХ ржЪрзЗржЮрзНржЬ рж╣рждрзЛ ржирж╛

**рж╕ржорж╛ржзрж╛ржи:**
- `setActiveTab("list")` ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ success ржПрж░ ржкрж░рзЗ
- ржЗржЙржЬрж╛рж░ рж╕рж░рж╛рж╕рж░рж┐ рж▓рж┐рж╕рзНржЯрзЗ ржирждрзБржи рж░рзЗржХрж░рзНржб ржжрзЗржЦрзЗ

---

## ЁЯУЛ рж╕ржорзНржкрзВрж░рзНржг ржЪрзЗржЮрзНржЬрж▓рж┐рж╕рзНржЯ

| ржлрж┐ржЪрж╛рж░ | ржкрж░рж┐ржмрж░рзНрждржи |
|--------|---------|
| Customer Selection | тЬЕ ржбрзНрж░ржкржбрж╛ржЙржи рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржпрзЛржЧ ржХрж░рж╛ |
| Branch Selection | тЬЕ ржбрзНрж░ржкржбрж╛ржЙржи рж╕рж┐рж▓рзЗржХрзНржЯрж░ ржпрзЛржЧ ржХрж░рж╛ |
| Auto-fill Fields | тЬЕ ржирж╛ржо, ржлрзЛржи, ржЗржорзЗржЗрж▓ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ |
| Loading State | тЬЕ рж╕ржм ржлрж░рзНржорзЗ ржпрзЛржЧ ржХрж░рж╛ |
| Button Disable | тЬЕ рж╕рж╛ржмржорж┐ржЯрж┐ржВ ржЯрж╛ржЗржорзЗ ржбрж┐рж╕рзЗржмрж▓ |
| Data Refresh | тЬЕ ржкрзЗржорзЗржирзНржЯрзЗрж░ ржкрж░рзЗ рж░рж┐ржлрзНрж░рзЗрж╢ |
| Form Reset | тЬЕ ржЯрзНржпрж╛ржм ржЪрзЗржЮрзНржЬ ржпрзЛржЧ ржХрж░рж╛ |
| Error Handling | тЬЕ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржЙржирзНржиржд ржХрж░рж╛ |

---

## ЁЯОп ржЯрзЗрж╕рзНржЯрж┐ржВ ржЪрзЗржХрж▓рж┐рж╕рзНржЯ

ржПржЦржи ржПржЗ ржмрж┐рж╖ржпрж╝ржЧрзБрж▓рж┐ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи:

```
ржкрзНрж░рж╛ржержорж┐ржХ ржкрж░рзАржХрзНрж╖рж╛:
тШР Add Outstanding ржЯрзНржпрж╛ржмрзЗ ржпрж╛ржи
тШР Customer dropdown ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржХрж┐ржирж╛
тШР Branch dropdown ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржХрж┐ржирж╛
тШР ржХрж╛рж╕рзНржЯржорж╛рж░ рж╕рж┐рж▓рзЗржХрзНржЯ ржХрж░рж▓рзЗ ржЕржЯрзЛ-ржлрж┐рж▓ рж╣ржпрж╝ ржХрж┐ржирж╛

ржлрж░рзНржо рж╕рж╛ржмржорж┐рж╢ржи:
тШР Save ржмрж╛ржЯржи ржХрзНрж▓рж┐ржХ ржХрж░рж▓рзЗ "Saving..." ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржХрж┐ржирж╛
тШР ржмрж╛ржЯржи ржбрж┐рж╕рзЗржмрж▓ рж╣ржпрж╝ ржХрж┐ржирж╛
тШР ржбрж╛ржмрж▓ ржХрзНрж▓рж┐ржХ ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛
тШР рж╕рж╛ржХрж╕рзЗрж╕рзЗрж░ ржкрж░рзЗ рж▓рж┐рж╕рзНржЯ ржЯрзНржпрж╛ржмрзЗ ржЪрж▓рзЗ ржпрж╛ржпрж╝ ржХрж┐ржирж╛

ржкрзЗржорзЗржирзНржЯ рж░рзЗржХрж░рзНржбрж┐ржВ:
тШР ржкрзЗржорзЗржирзНржЯ рж╕рзЗржн ржХрж░рж╛рж░ ржкрж░рзЗ amount ржЖржкржбрзЗржЯ рж╣ржпрж╝ ржХрж┐ржирж╛
тШР Status ржкрж░рж┐ржмрж░рзНрждржи рж╣ржпрж╝ ржХрж┐ржирж╛
тШР Data рж░рж┐ржлрзНрж░рзЗрж╢ ржжрзНрж░рзБржд рж╣ржпрж╝ ржХрж┐ржирж╛

ржлрж▓рзЛ-ржЖржк ржпрзЛржЧ ржХрж░рж╛:
тШР ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ рж╣ржпрж╝ ржХрж┐ржирж╛
тШР рж▓рзЛржбрж┐ржВ рж╕рзНржЯрзЗржЯ ржХрж╛ржЬ ржХрж░рзЗ ржХрж┐ржирж╛
тШР ржбрзЗржЯрж╛ рж╕рзЗржн рж╣ржпрж╝ ржХрж┐ржирж╛
```

---

## тЬи ржПржЦржи рж╕ржорзНржкрзВрж░рзНржг ржХрж╛рж░рзНржпржХрж░рзА

рж╕ржорж╕рзНржд ржЗрж╕рзНржпрзБ ржлрж┐ржХрзНрж╕ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ ржоржбрж┐ржЙрж▓ржЯрж┐ ржПржЦржи **рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ ржХрж╛рж░рзНржпржХрж░рзА**ред 

**ржирждрзБржи ржлрж┐ржЪрж╛рж░:**
- тЬЕ ржкрзНрж░ржХрзГржд ржХрж╛рж╕рзНржЯржорж╛рж░ ржПржмржВ ржмрзНрж░рзНржпрж╛ржирзНржЪ рж╕рж┐рж▓рзЗржХрж╢ржи
- тЬЕ ржнрж╛рж▓ ржЗржЙржЬрж╛рж░ ржлрж┐ржбржмрзНржпрж╛ржХ
- тЬЕ ржжржХрзНрж╖ ржбрзЗржЯрж╛ рж░рж┐ржлрзНрж░рзЗрж╢
- тЬЕ ржнрзНржпрж╛рж▓рж┐ржбрзЗрж╢ржи ржПржмржВ ржПрж░рж░ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ

**ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзБржи ржПржмржВ ржЬрж╛ржирж╛ржи ржпржжрж┐ ржЖрж░ржУ ржХрж┐ржЫрзБ ржкрзНрж░ржпрж╝рзЛржЬржи!** ЁЯЪА
